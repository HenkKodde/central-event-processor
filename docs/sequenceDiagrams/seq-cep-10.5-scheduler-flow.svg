<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="722px" preserveAspectRatio="none" style="width:374px;height:722px;" version="1.1" viewBox="0 0 374 722" width="374px" zoomAndPan="magnify"><defs><filter height="300%" id="f1k9qbgmrgshu0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="69.5" y="23.5352">10.5. Notification Scheduler Flow</text><rect fill="#90EE90" height="677.3242" style="stroke: #A80036; stroke-width: 1.0;" width="265.5" x="29" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="220" x="51.75" y="47.0566">Central Event Processing Service</text><rect fill="#FFFFFF" filter="url(#f1k9qbgmrgshu0)" height="510.0371" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="75.5" y="126.2871"/><rect fill="#FFFFFF" filter="url(#f1k9qbgmrgshu0)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="249.5" y="268.8398"/><rect fill="#FFFFFF" filter="url(#f1k9qbgmrgshu0)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="249.5" y="467.3926"/><rect fill="#FFFFFF" filter="url(#f1k9qbgmrgshu0)" height="496.0371" style="stroke: #000000; stroke-width: 2.0;" width="350" x="13" y="133.2871"/><rect fill="#FFFFFF" filter="url(#f1k9qbgmrgshu0)" height="275.1738" style="stroke: #000000; stroke-width: 2.0;" width="330" x="23" y="347.1504"/><rect fill="#FFFFFF" height="2" style="stroke: none; stroke-width: 1.0;" width="330" x="23" y="620.3242"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="80" x2="80" y1="116.2871" y2="646.3242"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="254.5" x2="254.5" y1="116.2871" y2="646.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="33" y="113.334">Action Agent</text><ellipse cx="80.5" cy="83.7988" fill="#FEFECE" filter="url(#f1k9qbgmrgshu0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="76.5,71.7988,82.5,66.7988,80.5,71.7988,82.5,76.7988,76.5,71.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="33" y="658.8594">Action Agent</text><ellipse cx="80.5" cy="677.8125" fill="#FEFECE" filter="url(#f1k9qbgmrgshu0)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="76.5,665.8125,82.5,660.8125,80.5,665.8125,82.5,670.8125,76.5,665.8125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="218.5" y="113.334">CEP Store</text><path d="M236.5,63.7988 C236.5,53.7988 254.5,53.7988 254.5,53.7988 C254.5,53.7988 272.5,53.7988 272.5,63.7988 L272.5,89.7988 C272.5,99.7988 254.5,99.7988 254.5,99.7988 C254.5,99.7988 236.5,99.7988 236.5,89.7988 L236.5,63.7988 " fill="#FEFECE" filter="url(#f1k9qbgmrgshu0)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M236.5,63.7988 C236.5,73.7988 254.5,73.7988 254.5,73.7988 C254.5,73.7988 272.5,73.7988 272.5,63.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="218.5" y="658.8594">CEP Store</text><path d="M236.5,671.8125 C236.5,661.8125 254.5,661.8125 254.5,661.8125 C254.5,661.8125 272.5,661.8125 272.5,671.8125 L272.5,697.8125 C272.5,707.8125 254.5,707.8125 254.5,707.8125 C254.5,707.8125 236.5,707.8125 236.5,697.8125 L236.5,671.8125 " fill="#FEFECE" filter="url(#f1k9qbgmrgshu0)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M236.5,671.8125 C236.5,681.8125 254.5,681.8125 254.5,681.8125 C254.5,681.8125 272.5,681.8125 272.5,671.8125 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1k9qbgmrgshu0)" height="510.0371" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="75.5" y="126.2871"/><rect fill="#FFFFFF" filter="url(#f1k9qbgmrgshu0)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="249.5" y="268.8398"/><rect fill="#FFFFFF" filter="url(#f1k9qbgmrgshu0)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="249.5" y="467.3926"/><path d="M13,133.2871 L159,133.2871 L159,140.2871 L149,150.2871 L13,150.2871 L13,133.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="496.0371" style="stroke: #000000; stroke-width: 2.0;" width="350" x="13" y="133.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="28" y="146.8555">Scheduler Flow</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85.5" x2="127.5" y1="171.9082" y2="171.9082"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127.5" x2="127.5" y1="171.9082" y2="184.9082"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86.5" x2="127.5" y1="184.9082" y2="184.9082"/><polygon fill="#A80036" points="96.5,180.9082,86.5,184.9082,96.5,188.9082,92.5,184.9082" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="92.5" y="167.166">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="109.5" y="167.166"/><path d="M90,197.9082 L90,237.9082 L316,237.9082 L316,207.9082 L306,197.9082 L90,197.9082 " fill="#D3D3D3" filter="url(#f1k9qbgmrgshu0)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M306,197.9082 L306,207.9082 L316,207.9082 L306,197.9082 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="96" y="215.4766">Scheduled time for certain</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="96" y="230.7871">event</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="134" y="230.7871">actionId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="192" y="230.7871">has been reached</text><polygon fill="#A80036" points="237.5,264.8398,247.5,268.8398,237.5,272.8398,241.5,268.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="85.5" x2="243.5" y1="268.8398" y2="268.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="92.5" y="264.0977">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="105.5" y="264.0977">Request Action by Id</text><polygon fill="#FBFB77" filter="url(#f1k9qbgmrgshu0)" points="233,311.8398,276,311.8398,286,322.8398,276,334.8398,233,334.8398,223,322.8398,233,311.8398" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="235" y="328.4082">action</text><path d="M23,347.1504 L85,347.1504 L85,354.1504 L75,364.1504 L23,364.1504 L23,347.1504 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="275.1738" style="stroke: #000000; stroke-width: 2.0;" width="330" x="23" y="347.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="360.7188">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="100" y="359.7852">[Action is active]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85.5" x2="127.5" y1="385.7715" y2="385.7715"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127.5" x2="127.5" y1="385.7715" y2="398.7715"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86.5" x2="127.5" y1="398.7715" y2="398.7715"/><polygon fill="#A80036" points="96.5,394.7715,86.5,398.7715,96.5,402.7715,92.5,398.7715" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="92.5" y="381.0293">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="109.5" y="381.0293"/><path d="M90,411.7715 L90,436.7715 L339,436.7715 L339,421.7715 L329,411.7715 L90,411.7715 " fill="#D3D3D3" filter="url(#f1k9qbgmrgshu0)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M329,411.7715 L329,421.7715 L339,421.7715 L329,411.7715 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="96" y="429.3398">Reset action timesTriggered counter</text><polygon fill="#A80036" points="237.5,463.3926,247.5,467.3926,237.5,471.3926,241.5,467.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="85.5" x2="243.5" y1="467.3926" y2="467.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="92.5" y="462.6504">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="105.5" y="462.6504">Persist Action Object</text><polygon fill="#FBFB77" filter="url(#f1k9qbgmrgshu0)" points="233,510.3926,276,510.3926,286,521.3926,276,533.3926,233,533.3926,223,521.3926,233,510.3926" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="235" y="526.9609">action</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="85.5" x2="127.5" y1="560.0137" y2="560.0137"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="127.5" x2="127.5" y1="560.0137" y2="573.0137"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="86.5" x2="127.5" y1="573.0137" y2="573.0137"/><polygon fill="#A80036" points="96.5,569.0137,86.5,573.0137,96.5,577.0137,92.5,573.0137" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="92.5" y="555.2715">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="109.5" y="555.2715"/><path d="M90,586.0137 L90,611.0137 L301,611.0137 L301,596.0137 L291,586.0137 L90,586.0137 " fill="#D3D3D3" filter="url(#f1k9qbgmrgshu0)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M291,586.0137 L291,596.0137 L301,596.0137 L291,586.0137 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="96" y="603.582">Reschedule the same</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="232" y="603.582">actionId</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="353" y1="621.3242" y2="621.3242"/><!--
@startuml
title 10.5. Notification Scheduler Flow
autonumber

control "Action Agent" as AA
database "CEP Store" as DB

box "Central Services" #LightYellow
end box
box "Central Event Processing Service" #LightGreen
participant AA
participant DB
end box

Group Scheduler Flow
    activate AA
    AA -> AA
    note right of AA #lightGrey
    Scheduled time for certain
    event **actionId** has been reached
    end note
    AA -> DB: Request Action by Id
    hnote over DB
        action
    end note
    activate DB
    deactivate DB
    alt Action is active
    AA -> AA
    note right of AA #lightGrey
        Reset action timesTriggered counter
    end note
    AA -> DB: Persist Action Object
    hnote over DB
        action
    end note
    activate DB
    deactivate DB
    AA -> AA
    note right of AA #lightGrey
        Reschedule the same **actionId**
    end note
    else
    end
end
    deactivate AA
@enduml

PlantUML version 1.2018.11(Sat Sep 22 18:43:53 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b26
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>