<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="471.2px" preserveAspectRatio="none" style="width:364px;height:471px;" version="1.1" viewBox="0 0 364 471" width="364.8px" zoomAndPan="magnify"><defs><filter height="300%" id="f1cglx2j5405c1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.600000023841858"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.200000047683716" dy="3.200000047683716" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="11.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="189.6" x="88.6" y="18.8281">10.5. Notification Scheduler Flow</text><rect fill="#90EE90" height="435.2656" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="320.4" x="23.2" y="27.5906"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="95.4" y="37.6453">Central Event Processing Service</text><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="301.4359" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="60.4" y="101.0297"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="307.6" y="171.375"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="307.6" y="298.7688"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="290.2359" style="stroke: #000000; stroke-width: 1.600000023841858;" width="346" x="10.4" y="106.6297"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="157.2422" style="stroke: #000000; stroke-width: 1.600000023841858;" width="330" x="18.4" y="234.0234"/><rect fill="#FFFFFF" height="1.6" style="stroke: none; stroke-width: 0.800000011920929;" width="330" x="18.4" y="389.6656"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="64" x2="64" y1="93.0297" y2="410.4656"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="311.6" x2="311.6" y1="93.0297" y2="410.4656"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="71.2" x="26.4" y="90.6672">Action Agent</text><ellipse cx="64.4" cy="67.0391" fill="#FEFECE" filter="url(#f1cglx2j5405c1)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><polygon fill="#A80036" points="61.2,57.4391,66,53.4391,64.4,57.4391,66,61.4391,61.2,57.4391" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="71.2" x="26.4" y="420.4938">Action Agent</text><ellipse cx="64.4" cy="435.6563" fill="#FEFECE" filter="url(#f1cglx2j5405c1)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><polygon fill="#A80036" points="61.2,426.0563,66,422.0563,64.4,426.0563,66,430.0563,61.2,426.0563" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="282.8" y="90.6672">CEP Store</text><path d="M297.2,51.0391 C297.2,43.0391 311.6,43.0391 311.6,43.0391 C311.6,43.0391 326,43.0391 326,51.0391 L326,71.8391 C326,79.8391 311.6,79.8391 311.6,79.8391 C311.6,79.8391 297.2,79.8391 297.2,71.8391 L297.2,51.0391 " fill="#FEFECE" filter="url(#f1cglx2j5405c1)" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><path d="M297.2,51.0391 C297.2,59.0391 311.6,59.0391 311.6,59.0391 C311.6,59.0391 326,59.0391 326,51.0391 " fill="none" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="282.8" y="420.4938">CEP Store</text><path d="M297.2,430.8563 C297.2,422.8563 311.6,422.8563 311.6,422.8563 C311.6,422.8563 326,422.8563 326,430.8563 L326,451.6563 C326,459.6563 311.6,459.6563 311.6,459.6563 C311.6,459.6563 297.2,459.6563 297.2,451.6563 L297.2,430.8563 " fill="#FEFECE" filter="url(#f1cglx2j5405c1)" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><path d="M297.2,430.8563 C297.2,438.8563 311.6,438.8563 311.6,438.8563 C311.6,438.8563 326,438.8563 326,430.8563 " fill="none" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="301.4359" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="60.4" y="101.0297"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="307.6" y="171.375"/><rect fill="#FFFFFF" filter="url(#f1cglx2j5405c1)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="307.6" y="298.7688"/><path d="M10.4,106.6297 L127.2,106.6297 L127.2,112.2297 L119.2,120.2297 L10.4,120.2297 L10.4,106.6297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="290.2359" style="stroke: #000000; stroke-width: 1.600000023841858;" width="346" x="10.4" y="106.6297"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80.8" x="22.4" y="117.4844">Scheduler Flow</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="68.4" x2="102" y1="137.5266" y2="137.5266"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="102" x2="102" y1="137.5266" y2="147.9266"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="69.2" x2="102" y1="147.9266" y2="147.9266"/><polygon fill="#A80036" points="77.2,144.7266,69.2,147.9266,77.2,151.1266,74,147.9266" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="74" y="133.7328">1</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="27.2" x="84.4" y="133.7328">Event</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="114.8" y="133.7328">actionId</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="140.8" x="161.2" y="133.7328">triggered by scheduled time</text><polygon fill="#A80036" points="298,168.175,306,171.375,298,174.575,301.2,171.375" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="68.4" x2="302.8" y1="171.375" y2="171.375"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="74" y="167.5813">2</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="104" x="84.4" y="167.5813">Request Action by Id</text><polygon fill="#FFFFE0" filter="url(#f1cglx2j5405c1)" points="294.4,205.775,328.8,205.775,336.8,214.575,328.8,224.175,294.4,224.175,286.4,214.575,294.4,205.775" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="296" y="219.0297">action</text><path d="M18.4,234.0234 L68,234.0234 L68,239.6234 L60,247.6234 L18.4,247.6234 L18.4,234.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="157.2422" style="stroke: #000000; stroke-width: 1.600000023841858;" width="330" x="18.4" y="234.0234"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.6" x="30.4" y="244.8781">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="80" y="244.1313">[Action is active]</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="68.4" x2="102" y1="264.9203" y2="264.9203"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="102" x2="102" y1="264.9203" y2="275.3203"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="69.2" x2="102" y1="275.3203" y2="275.3203"/><polygon fill="#A80036" points="77.2,272.1203,69.2,275.3203,77.2,278.5203,74,275.3203" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="74" y="261.1266">3</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="182.4" x="84.4" y="261.1266">Reset action timesTriggered counter</text><polygon fill="#A80036" points="298,295.5688,306,298.7688,298,301.9688,301.2,298.7688" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="68.4" x2="302.8" y1="298.7688" y2="298.7688"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="74" y="294.975">4</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="105.6" x="84.4" y="294.975">Persist Action Object</text><polygon fill="#FFFFE0" filter="url(#f1cglx2j5405c1)" points="294.4,333.1688,328.8,333.1688,336.8,341.9688,328.8,351.5688,294.4,351.5688,286.4,341.9688,294.4,333.1688" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="296" y="346.4234">action</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="68.4" x2="102" y1="372.8656" y2="372.8656"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="102" x2="102" y1="372.8656" y2="383.2656"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="69.2" x2="102" y1="383.2656" y2="383.2656"/><polygon fill="#A80036" points="77.2,380.0656,69.2,383.2656,77.2,386.4656,74,383.2656" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="74" y="369.0719">5</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="105.6" x="84.4" y="369.0719">Reschedule the same</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="193.2" y="369.0719">actionId</text><line style="stroke: #000000; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="18.4" x2="348.4" y1="390.4656" y2="390.4656"/><!--
@startuml
title 10.5. Notification Scheduler Flow
autonumber

control "Action Agent" as AA
database "CEP Store" as DB

box "Central Services" #LightYellow
end box
box "Central Event Processing Service" #LightGreen
participant AA
participant DB
end box

Group Scheduler Flow
    activate AA
    AA -> AA: Event **actionId** triggered by scheduled time
    AA -> DB: Request Action by Id
    hnote over DB #LightYellow
        action
    end note
    activate DB
    deactivate DB
    alt Action is active
    AA -> AA: Reset action timesTriggered counter
    AA -> DB: Persist Action Object
    hnote over DB #LightYellow
        action
    end note
    activate DB
    deactivate DB
    AA -> AA: Reschedule the same **actionId**
    else
    end
end
    deactivate AA
@enduml

PlantUML version 1.2018.11(Sat Sep 22 18:43:53 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b26
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>