<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1108.8px" preserveAspectRatio="none" style="width:756px;height:1108px;" version="1.1" viewBox="0 0 756 1108" width="756.8px" zoomAndPan="magnify"><defs><filter height="300%" id="f1q9wr4wd2ccmz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.600000023841858"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.200000047683716" dy="3.200000047683716" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="11.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171.2" x="293.6" y="18.8281">10.4. Notification Action Flow</text><rect fill="#FFFFE0" height="1072.8172" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="124" x="31.2" y="27.5906"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="50" y="37.6453">Central Services</text><rect fill="#90EE90" height="1072.8172" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="562.4" x="156.8" y="27.5906"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="350" y="37.6453">Central Event Processing Service</text><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="89.2" y="708.2891"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="89.2" y="980.8531"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="933.3875" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="223.2" y="101.0297"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="891.2906" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="380" y="137.5266"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="683.2" y="214.2719"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="683.2" y="390.4109"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="50.0969" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="683.2" y="483.9563"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="683.2" y="820.9984"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="927.7875" style="stroke: #000000; stroke-width: 1.600000023841858;" width="737.6" x="10.4" y="106.6297"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="845.4422" style="stroke: #000000; stroke-width: 1.600000023841858;" width="721.6" x="18.4" y="183.375"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="558.1938" style="stroke: #000000; stroke-width: 1.600000023841858;" width="705.6" x="26.4" y="453.0594"/><rect fill="#FFFFFF" height="272.5641" style="stroke: none; stroke-width: 0.800000011920929;" width="705.6" x="26.4" y="738.6891"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="133.7578" style="stroke: #000000; stroke-width: 1.600000023841858;" width="386" x="338" y="756.2531"/><rect fill="#FFFFFF" height="11.9641" style="stroke: none; stroke-width: 0.800000011920929;" width="386" x="338" y="878.0469"/><rect fill="#FFFFFF" height="11.9641" style="stroke: none; stroke-width: 0.800000011920929;" width="721.6" x="18.4" y="1016.8531"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="92.8" x2="92.8" y1="93.0297" y2="1048.0172"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="227.2" x2="227.2" y1="93.0297" y2="1048.0172"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="383.6" x2="383.6" y1="93.0297" y2="1048.0172"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="687.2" x2="687.2" y1="93.0297" y2="1048.0172"/><rect fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="37.6" y="61.4391"/><rect fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="34.4" y="64.6391"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="100" x="40" y="81.0672">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="37.6" y="1047.2172"/><rect fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="34.4" y="1050.4172"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="100" x="40" y="1066.8453">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="129.6" x="160" y="90.6672">Central Event Processor</text><path d="M210.8,57.4391 L210.8,76.6391 M210.8,67.0391 L224.4,67.0391 " fill="none" filter="url(#f1q9wr4wd2ccmz)" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><ellipse cx="234" cy="67.0391" fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="129.6" x="160" y="1058.0453">Central Event Processor</text><path d="M210.8,1063.6078 L210.8,1082.8078 M210.8,1073.2078 L224.4,1073.2078 " fill="none" filter="url(#f1q9wr4wd2ccmz)" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><ellipse cx="234" cy="1073.2078" fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="71.2" x="346" y="90.6672">Action Agent</text><ellipse cx="384" cy="67.0391" fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><polygon fill="#A80036" points="380.8,57.4391,385.6,53.4391,384,57.4391,385.6,61.4391,380.8,57.4391" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="71.2" x="346" y="1058.0453">Action Agent</text><ellipse cx="384" cy="1073.2078" fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><polygon fill="#A80036" points="380.8,1063.6078,385.6,1059.6078,384,1063.6078,385.6,1067.6078,380.8,1063.6078" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="658.4" y="90.6672">CEP Store</text><path d="M672.8,51.0391 C672.8,43.0391 687.2,43.0391 687.2,43.0391 C687.2,43.0391 701.6,43.0391 701.6,51.0391 L701.6,71.8391 C701.6,79.8391 687.2,79.8391 687.2,79.8391 C687.2,79.8391 672.8,79.8391 672.8,71.8391 L672.8,51.0391 " fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><path d="M672.8,51.0391 C672.8,59.0391 687.2,59.0391 687.2,59.0391 C687.2,59.0391 701.6,59.0391 701.6,51.0391 " fill="none" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="658.4" y="1058.0453">CEP Store</text><path d="M672.8,1068.4078 C672.8,1060.4078 687.2,1060.4078 687.2,1060.4078 C687.2,1060.4078 701.6,1060.4078 701.6,1068.4078 L701.6,1089.2078 C701.6,1097.2078 687.2,1097.2078 687.2,1097.2078 C687.2,1097.2078 672.8,1097.2078 672.8,1089.2078 L672.8,1068.4078 " fill="#FEFECE" filter="url(#f1q9wr4wd2ccmz)" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><path d="M672.8,1068.4078 C672.8,1076.4078 687.2,1076.4078 687.2,1076.4078 C687.2,1076.4078 701.6,1076.4078 701.6,1068.4078 " fill="none" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="89.2" y="708.2891"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="89.2" y="980.8531"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="933.3875" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="223.2" y="101.0297"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="891.2906" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="380" y="137.5266"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="683.2" y="214.2719"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="683.2" y="390.4109"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="50.0969" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="683.2" y="483.9563"/><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="683.2" y="820.9984"/><path d="M10.4,106.6297 L108,106.6297 L108,112.2297 L100,120.2297 L10.4,120.2297 L10.4,106.6297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="927.7875" style="stroke: #000000; stroke-width: 1.600000023841858;" width="737.6" x="10.4" y="106.6297"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.6" x="22.4" y="117.4844">Action Flow</text><polygon fill="#A80036" points="370.4,134.3266,378.4,137.5266,370.4,140.7266,373.6,137.5266" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="231.2" x2="375.2" y1="137.5266" y2="137.5266"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="236.8" y="133.7328">1</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="123.2" x="247.2" y="133.7328">Recieves an action event</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388" x2="421.6" y1="160.975" y2="160.975"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="421.6" x2="421.6" y1="160.975" y2="171.375"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388.8" x2="421.6" y1="171.375" y2="171.375"/><polygon fill="#A80036" points="396.8,168.175,388.8,171.375,396.8,174.575,393.6,171.375" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="393.6" y="157.1813">2</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="106.4" x="404" y="157.1813">Evaluate action event</text><path d="M18.4,183.375 L68,183.375 L68,188.975 L60,196.975 L18.4,196.975 L18.4,183.375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="845.4422" style="stroke: #000000; stroke-width: 1.600000023841858;" width="721.6" x="18.4" y="183.375"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.6" x="30.4" y="194.2297">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="80" y="193.4828">[</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60.8" x="83.2" y="193.4828">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="147.2" y="193.4828">exist]</text><polygon fill="#A80036" points="673.6,211.0719,681.6,214.2719,673.6,217.4719,676.8,214.2719" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388" x2="678.4" y1="214.2719" y2="214.2719"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="393.6" y="210.4781">3</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="40" x="404" y="210.4781">Request</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68.8" x="447.2" y="210.4781">Event Object</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="33.6" x="522.4" y="210.4781">details</text><polygon fill="#FFFFE0" filter="url(#f1q9wr4wd2ccmz)" points="672,248.6719,702.4,248.6719,710.4,257.4719,702.4,267.0719,672,267.0719,664,257.4719,672,248.6719" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="27.2" x="673.6" y="261.9266">event</text><path d="M392,275.3203 L392,332.1203 L548,332.1203 L548,283.3203 L540,275.3203 L392,275.3203 " fill="#D3D3D3" filter="url(#f1q9wr4wd2ccmz)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M540,275.3203 L540,283.3203 L548,283.3203 L540,275.3203 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68.8" x="396.8" y="289.375">Event Object</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="36.8" x="468.8" y="289.375">details;</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="409.6" y="301.6234">Action details,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="122.4" x="409.6" y="313.8719">Hub notification details,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="126.4" x="409.6" y="326.1203">DFSP notification details.</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388" x2="421.6" y1="356.5625" y2="356.5625"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="421.6" x2="421.6" y1="356.5625" y2="366.9625"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388.8" x2="421.6" y1="366.9625" y2="366.9625"/><polygon fill="#A80036" points="396.8,363.7625,388.8,366.9625,396.8,370.1625,393.6,366.9625" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="393.6" y="352.7688">4</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="135.2" x="404" y="352.7688">Prepare notification details</text><polygon fill="#A80036" points="673.6,387.2109,681.6,390.4109,673.6,393.6109,676.8,390.4109" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388" x2="678.4" y1="390.4109" y2="390.4109"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="393.6" y="386.6172">5</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="40" x="404" y="386.6172">Request</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="447.2" y="386.6172">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="41.6" x="523.2" y="386.6172">by same</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68.8" x="568" y="386.6172">Event Object</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="33.6" x="640" y="386.6172">details</text><polygon fill="#FFFFE0" filter="url(#f1q9wr4wd2ccmz)" points="669.6,424.8109,704,424.8109,712,433.6109,704,443.2109,669.6,443.2109,661.6,433.6109,669.6,424.8109" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="671.2" y="438.0656">action</text><path d="M26.4,453.0594 L76,453.0594 L76,458.6594 L68,466.6594 L26.4,466.6594 L26.4,453.0594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="558.1938" style="stroke: #000000; stroke-width: 1.600000023841858;" width="705.6" x="26.4" y="453.0594"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.6" x="38.4" y="463.9141">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57.6" x="88" y="463.1672">[No previous</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60.8" x="148.8" y="463.1672">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="212.8" y="463.1672">with same event detail]</text><polygon fill="#A80036" points="673.6,480.7563,681.6,483.9563,673.6,487.1563,676.8,483.9563" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388" x2="678.4" y1="483.9563" y2="483.9563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="393.6" y="480.1625">6</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="25.6" x="404" y="480.1625">Store</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="432.8" y="480.1625">Action Object</text><polygon fill="#FFFFE0" filter="url(#f1q9wr4wd2ccmz)" points="669.6,494.3563,704,494.3563,712,503.1563,704,512.7563,669.6,512.7563,661.6,503.1563,669.6,494.3563" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="671.2" y="507.6109">action</text><polygon fill="#A80036" points="396.8,530.8531,388.8,534.0531,396.8,537.2531,393.6,534.0531" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="392" x2="686.4" y1="534.0531" y2="534.0531"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="401.6" y="530.2594">7</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="412" y="530.2594">Return result</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="480" y="530.2594">actionId</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388" x2="421.6" y1="557.5016" y2="557.5016"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="421.6" x2="421.6" y1="557.5016" y2="567.9016"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388.8" x2="421.6" y1="567.9016" y2="567.9016"/><polygon fill="#A80036" points="396.8,564.7016,388.8,567.9016,396.8,571.1016,393.6,567.9016" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="393.6" y="553.7078">8</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="142.4" x="404" y="553.7078">Schedule reset repetition for</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="549.6" y="553.7078">actionId</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="58.4" x="596" y="553.7078">as per rules</text><rect fill="#FFFFFF" filter="url(#f1q9wr4wd2ccmz)" height="44.7453" style="stroke: #000000; stroke-width: 1.600000023841858;" width="180" x="343.6" y="574.3016"/><polygon fill="#EEEEEE" points="343.6,574.3016,394.8,574.3016,394.8,579.9016,386.8,587.9016,343.6,587.9016,343.6,574.3016" style="stroke: #000000; stroke-width: 1.600000023841858;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15.2" x="354" y="585.9563">ref</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="144.8" x="348.4" y="601.1563">Notification Scheduler Flow {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/central-event-processor/tree/master/docs/sequenceDiagrams/seq-cep-10.5-scheduler-flow.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/central-event-processor/tree/master/docs/sequenceDiagrams/seq-cep-10.5-scheduler-flow.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="22.4" x="493.2" y="601.1563">10.5</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="493.2" x2="515.6" y1="602.7563" y2="602.7563"/></a><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="515.6" y="601.1563">}</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="0" x="351.6" y="613.4047"/><path d="M253.6,627.0469 L253.6,683.8469 L372.8,683.8469 L372.8,635.0469 L364.8,627.0469 L253.6,627.0469 " fill="#FFFF00" filter="url(#f1q9wr4wd2ccmz)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M364.8,627.0469 L364.8,635.0469 L372.8,635.0469 L364.8,627.0469 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="92" x="258.4" y="641.1016">Notification topic:</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="271.2" y="653.35">{</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="284" y="665.5984">from: "SYSTEM"</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="271.2" y="677.8469">}</text><polygon fill="#A80036" points="106,705.0891,98,708.2891,106,711.4891,102.8,708.2891" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="101.2" x2="379.2" y1="708.2891" y2="708.2891"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="110.8" y="704.4953">9</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="150.4" x="121.2" y="704.4953">Update topic with notification</text><line style="stroke: #000000; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="26.4" x2="732" y1="739.4891" y2="739.4891"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42.4" x="30.4" y="747.9969">[Previous</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60.8" x="76" y="747.9969">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104" x="140" y="747.9969">with same event detail]</text><path d="M338,756.2531 L387.6,756.2531 L387.6,761.8531 L379.6,769.8531 L338,769.8531 L338,756.2531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="133.7578" style="stroke: #000000; stroke-width: 1.600000023841858;" width="386" x="338" y="756.2531"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.6" x="350" y="767.1078">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201.6" x="399.6" y="766.3609">[Repetition and notification interval allowed]</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388" x2="421.6" y1="787.15" y2="787.15"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="421.6" x2="421.6" y1="787.15" y2="797.55"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388.8" x2="421.6" y1="797.55" y2="797.55"/><polygon fill="#A80036" points="396.8,794.35,388.8,797.55,396.8,800.75,393.6,797.55" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14.4" x="393.6" y="783.3563">10</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="144" x="411.2" y="783.3563">Increment repetition counter</text><polygon fill="#A80036" points="673.6,817.7984,681.6,820.9984,673.6,824.1984,676.8,820.9984" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="388" x2="678.4" y1="820.9984" y2="820.9984"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14.4" x="393.6" y="817.2047">11</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="35.2" x="411.2" y="817.2047">Update</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="449.6" y="817.2047">Action Object</text><polygon fill="#FFFFE0" filter="url(#f1q9wr4wd2ccmz)" points="669.6,855.3985,704,855.3985,712,864.1985,704,873.7985,669.6,873.7985,661.6,864.1985,669.6,855.3985" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="671.2" y="868.6531">action</text><line style="stroke: #000000; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="338" x2="724" y1="878.8469" y2="878.8469"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="219.2" x="342" y="887.3547">[Repetition and notification interval not allowed]</text><path d="M253.6,899.611 L253.6,956.411 L372.8,956.411 L372.8,907.611 L364.8,899.611 L253.6,899.611 " fill="#FFFF00" filter="url(#f1q9wr4wd2ccmz)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M364.8,899.611 L364.8,907.611 L372.8,907.611 L364.8,899.611 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="92" x="258.4" y="913.6656">Notification topic:</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="271.2" y="925.9141">{</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="284" y="938.1625">from: "SYSTEM"</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="271.2" y="950.411">}</text><polygon fill="#A80036" points="106,977.6531,98,980.8531,106,984.0531,102.8,980.8531" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="101.2" x2="379.2" y1="980.8531" y2="980.8531"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14.4" x="110.8" y="977.0594">12</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="150.4" x="128.4" y="977.0594">Update topic with notification</text><line style="stroke: #000000; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="18.4" x2="740" y1="1017.6531" y2="1017.6531"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15.2" x="22.4" y="1026.161">[No</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60.8" x="40.8" y="1026.161">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="104.8" y="1026.161">exist]</text><!--
@startuml
title 10.4. Notification Action Flow
autonumber

collections "Notification-Topic" as topicNotify
boundary "Central Event Processor" as CEP
control "Action Agent" as AA
database "CEP Store" as DB

box "Central Services" #LightYellow
participant topicNotify
end box
box "Central Event Processing Service" #LightGreen
participant CEP
participant AA
participant DB
end box

Group Action Flow
    activate CEP
    CEP -> AA: Recieves an action event
    activate AA
    AA -> AA: Evaluate action event

    alt **Action Object** exist
        AA -> DB: Request **Event Object**  details
        activate DB
        deactivate DB
        hnote over DB #LightYellow
            event
        end hnote
        note right of AA #LightGrey
            **Event Object** details;
                Action details,
                Hub notification details,
                DFSP notification details.
        end note
        AA -> AA: Prepare notification details
        AA -> DB: Request **Action Object** by same **Event Object** details
        activate DB
        deactivate DB
        hnote over DB #LightYellow
            action
        end hnote

        alt No previous **Action Object** with same event detail
            AA -> DB: Store **Action Object**
            activate DB
            hnote over DB #LightYellow
                action
            end hnote
            AA <- - DB: Return result **actionId**
            deactivate DB
            AA -> AA: Schedule reset repetition for **actionId** as per rules
            ref over AA :  Notification Scheduler Flow {[[https://github.com/mojaloop/central-event-processor/tree/master/docs/sequenceDiagrams/seq-cep-10.5-scheduler-flow.svg 10.5]]} \n
            note left of AA #yellow
                Notification topic:
                    {
                        from: "SYSTEM"
                    }
            end note
            topicNotify <- AA: Update topic with notification
            activate topicNotify
            deactivate topicNotify
        else Previous **Action Object** with same event detail

            alt Repetition and notification interval allowed
                AA -> AA: Increment repetition counter
                AA -> DB: Update **Action Object**
                activate DB
                hnote over DB #LightYellow
                    action
                end hnote
                deactivate DB
            else Repetition and notification interval not allowed
            end
            note left of AA #yellow
                Notification topic:
                    {
                        from: "SYSTEM"
                    }
            end note
            topicNotify <- AA: Update topic with notification
            activate topicNotify
            deactivate topicNotify
        end
    else No **Action Object** exist
    deactivate AA
    end
    deactivate CEP
end
@enduml

PlantUML version 1.2018.11(Sat Sep 22 18:43:53 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b26
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>