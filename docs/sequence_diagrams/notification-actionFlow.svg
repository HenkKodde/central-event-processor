<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1058.4px" preserveAspectRatio="none" style="width:597px;height:1058px;" version="1.1" viewBox="0 0 597 1058" width="597.6px" zoomAndPan="magnify"><defs><filter height="300%" id="fyyj2gg2arcmu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.600000023841858"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.200000047683716" dy="3.200000047683716" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="11.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="304" x="147.8" y="18.8281">10.3. Notification Limit Adjustment Rules Validation</text><rect fill="#FFFFE0" height="1022.7563" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="124" x="15.2" y="27.5906"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="34" y="37.6453">Central Services</text><rect fill="#90EE90" height="1022.7563" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="360.8" x="207.6" y="27.5906"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="300" y="37.6453">Central Event Processing Service</text><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="73.2" y="193.4719"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="883.3266" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="274" y="101.0297"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="532.4" y="374.6594"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="532.4" y="448.7563"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="50.0969" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="532.4" y="799.15"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="532.4" y="904.1438"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="877.7266" style="stroke: #000000; stroke-width: 1.600000023841858;" width="578.8" x="10.4" y="106.6297"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="634.9938" style="stroke: #000000; stroke-width: 1.600000023841858;" width="386.4" x="194.8" y="343.7625"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="347.7453" style="stroke: #000000; stroke-width: 1.600000023841858;" width="370.4" x="202.8" y="613.4469"/><rect fill="#FFFFFF" height="256.3516" style="stroke: none; stroke-width: 0.800000011920929;" width="370.4" x="202.8" y="704.8406"/><rect fill="#FFFFFF" height="11.9641" style="stroke: none; stroke-width: 0.800000011920929;" width="386.4" x="194.8" y="966.7922"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="76.8" x2="76.8" y1="93.0297" y2="997.9563"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="278" x2="278" y1="93.0297" y2="997.9563"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="536.4" x2="536.4" y1="93.0297" y2="997.9563"/><rect fill="#FEFECE" filter="url(#fyyj2gg2arcmu)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="21.6" y="61.4391"/><rect fill="#FEFECE" filter="url(#fyyj2gg2arcmu)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="18.4" y="64.6391"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="100" x="24" y="81.0672">Notification-Topic</text><rect fill="#FEFECE" filter="url(#fyyj2gg2arcmu)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="21.6" y="997.1563"/><rect fill="#FEFECE" filter="url(#fyyj2gg2arcmu)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="18.4" y="1000.3563"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="100" x="24" y="1016.7844">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="129.6" x="210.8" y="90.6672">Central Event Processor</text><ellipse cx="278" cy="67.0391" fill="#FEFECE" filter="url(#fyyj2gg2arcmu)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><polygon fill="#A80036" points="274.8,57.4391,279.6,53.4391,278,57.4391,279.6,61.4391,274.8,57.4391" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="129.6" x="210.8" y="1007.9844">Central Event Processor</text><ellipse cx="278" cy="1023.1469" fill="#FEFECE" filter="url(#fyyj2gg2arcmu)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><polygon fill="#A80036" points="274.8,1013.5469,279.6,1009.5469,278,1013.5469,279.6,1017.5469,274.8,1013.5469" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="507.6" y="90.6672">CEP Store</text><path d="M522,51.0391 C522,43.0391 536.4,43.0391 536.4,43.0391 C536.4,43.0391 550.8,43.0391 550.8,51.0391 L550.8,71.8391 C550.8,79.8391 536.4,79.8391 536.4,79.8391 C536.4,79.8391 522,79.8391 522,71.8391 L522,51.0391 " fill="#FEFECE" filter="url(#fyyj2gg2arcmu)" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><path d="M522,51.0391 C522,59.0391 536.4,59.0391 536.4,59.0391 C536.4,59.0391 550.8,59.0391 550.8,51.0391 " fill="none" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="507.6" y="1007.9844">CEP Store</text><path d="M522,1018.3469 C522,1010.3469 536.4,1010.3469 536.4,1010.3469 C536.4,1010.3469 550.8,1010.3469 550.8,1018.3469 L550.8,1039.1469 C550.8,1047.1469 536.4,1047.1469 536.4,1047.1469 C536.4,1047.1469 522,1047.1469 522,1039.1469 L522,1018.3469 " fill="#FEFECE" filter="url(#fyyj2gg2arcmu)" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><path d="M522,1018.3469 C522,1026.3469 536.4,1026.3469 536.4,1026.3469 C536.4,1026.3469 550.8,1026.3469 550.8,1018.3469 " fill="none" style="stroke: #000000; stroke-width: 1.2000000178813934;"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="73.2" y="193.4719"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="883.3266" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="274" y="101.0297"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="532.4" y="374.6594"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="532.4" y="448.7563"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="50.0969" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="532.4" y="799.15"/><rect fill="#FFFFFF" filter="url(#fyyj2gg2arcmu)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="532.4" y="904.1438"/><path d="M10.4,106.6297 L230.4,106.6297 L230.4,112.2297 L222.4,120.2297 L10.4,120.2297 L10.4,106.6297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="877.7266" style="stroke: #000000; stroke-width: 1.600000023841858;" width="578.8" x="10.4" y="106.6297"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="22.4" y="117.4844">Limit Adjustment Rules Validation</text><path d="M80.8,124.4781 L80.8,168.4781 L202.4,168.4781 L202.4,132.4781 L194.4,124.4781 L80.8,124.4781 " fill="#D3D3D3" filter="url(#fyyj2gg2arcmu)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M194.4,124.4781 L194.4,132.4781 L202.4,132.4781 L194.4,124.4781 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="104" x="85.6" y="138.5328">Events are published</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="104.8" x="85.6" y="150.7813">to Notification Topic</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="95.2" x="85.6" y="163.0297">by Central Services</text><polygon fill="#A80036" points="90,190.2719,82,193.4719,90,196.6719,86.8,193.4719" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="85.2" x2="273.2" y1="193.4719" y2="193.4719"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="94.8" y="189.6781">1</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="167.2" x="105.2" y="189.6781">Consumes notification messages</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282" x2="315.6" y1="240.9203" y2="240.9203"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="315.6" x2="315.6" y1="240.9203" y2="251.3203"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282.8" x2="315.6" y1="251.3203" y2="251.3203"/><polygon fill="#A80036" points="290.8,248.1203,282.8,251.3203,290.8,254.5203,287.6,251.3203" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="287.6" y="237.1266">2</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="156.8" x="298" y="237.1266">Filter according to event action</text><path d="M285.6,261.7203 L285.6,330.5203 L497.6,330.5203 L497.6,269.7203 L489.6,261.7203 L285.6,261.7203 " fill="#FBFB77" filter="url(#fyyj2gg2arcmu)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M489.6,261.7203 L489.6,269.7203 L497.6,269.7203 L489.6,261.7203 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="116.8" x="290.4" y="275.775">Qualifying event action</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="0" x="293.6" y="288.0234"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="290.4" y="300.2719">{</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="182.4" x="303.2" y="312.5203">"limit" in data.value.content.payload</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="290.4" y="324.7688">}</text><path d="M194.8,343.7625 L244.4,343.7625 L244.4,349.3625 L236.4,357.3625 L194.8,357.3625 L194.8,343.7625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="634.9938" style="stroke: #000000; stroke-width: 1.600000023841858;" width="386.4" x="194.8" y="343.7625"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.6" x="206.8" y="354.6172">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="256.4" y="353.8703">[Messages event type that qualify]</text><polygon fill="#A80036" points="522.8,371.4594,530.8,374.6594,522.8,377.8594,526,374.6594" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282" x2="527.6" y1="374.6594" y2="374.6594"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="287.6" y="370.8656">3</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="298" y="370.8656">Update current</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29.6" x="375.6" y="370.8656">limits</text><polygon fill="#FFFFE0" filter="url(#fyyj2gg2arcmu)" points="520,409.0594,552,409.0594,560,417.8594,552,427.4594,520,427.4594,512,417.8594,520,409.0594" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="28.8" x="521.6" y="422.3141">limits</text><polygon fill="#A80036" points="522.8,445.5563,530.8,448.7563,522.8,451.9563,526,448.7563" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282" x2="527.6" y1="448.7563" y2="448.7563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="287.6" y="444.9625">4</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="32" x="298" y="444.9625">Create</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="333.2" y="444.9625">events</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="73.6" x="372.4" y="444.9625">per participant</text><polygon fill="#FFFFE0" filter="url(#fyyj2gg2arcmu)" points="518.4,483.1563,554.4,483.1563,562.4,491.9563,554.4,501.5563,518.4,501.5563,510.4,491.9563,518.4,483.1563" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="32.8" x="520" y="496.4109">events</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282" x2="315.6" y1="522.8531" y2="522.8531"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="315.6" x2="315.6" y1="522.8531" y2="533.2531"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282.8" x2="315.6" y1="533.2531" y2="533.2531"/><polygon fill="#A80036" points="290.8,530.0531,282.8,533.2531,290.8,536.4531,287.6,533.2531" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="287.6" y="519.0594">5</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="0" x="301.2" y="519.0594"/><path d="M285.6,543.6531 L285.6,600.4531 L500,600.4531 L500,551.6531 L492,543.6531 L285.6,543.6531 " fill="#D3D3D3" filter="url(#fyyj2gg2arcmu)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M492,543.6531 L492,551.6531 L500,551.6531 L492,543.6531 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="144.8" x="290.4" y="557.7078">Check if there is a difference</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="164.8" x="290.4" y="569.9563">between the stored and captured</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29.6" x="458.4" y="569.9563">limits</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="40.8" x="290.4" y="582.2047">for both</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32.8" x="334.4" y="582.2047">payee</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="18.4" x="370.4" y="582.2047">and</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="392" y="582.2047">payer</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="29.6" x="290.4" y="594.4531">for all</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56.8" x="323.2" y="594.4531">currencies</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="380" y="594.4531">.</text><path d="M202.8,613.4469 L252.4,613.4469 L252.4,619.0469 L244.4,627.0469 L202.8,627.0469 L202.8,613.4469 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="347.7453" style="stroke: #000000; stroke-width: 1.600000023841858;" width="370.4" x="202.8" y="613.4469"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.6" x="214.8" y="624.3016">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124.8" x="264.4" y="623.5547">[Limit difference identified]</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282" x2="315.6" y1="644.3438" y2="644.3438"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="315.6" x2="315.6" y1="644.3438" y2="654.7438"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282.8" x2="315.6" y1="654.7438" y2="654.7438"/><polygon fill="#A80036" points="290.8,651.5438,282.8,654.7438,290.8,657.9438,287.6,654.7438" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="287.6" y="640.55">6</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="0" x="301.2" y="640.55"/><path d="M285.6,665.1438 L285.6,697.1438 L505.6,697.1438 L505.6,673.1438 L497.6,665.1438 L285.6,665.1438 " fill="#D3D3D3" filter="url(#fyyj2gg2arcmu)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M497.6,665.1438 L497.6,673.1438 L505.6,673.1438 L497.6,665.1438 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="290.4" y="679.1984">Create new</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="348.8" y="679.1984">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="421.6" y="679.1984">.</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="22.4" x="290.4" y="691.4469">Pass</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="316" y="691.4469">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="101.6" x="392" y="691.4469">to the Action Agent.</text><line style="stroke: #000000; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="202.8" x2="573.2" y1="705.6406" y2="705.6406"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140.8" x="206.8" y="714.1484">[Limits are equal - same event]</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282" x2="315.6" y1="733.8531" y2="733.8531"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="315.6" x2="315.6" y1="733.8531" y2="744.2531"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282.8" x2="315.6" y1="744.2531" y2="744.2531"/><polygon fill="#A80036" points="290.8,741.0531,282.8,744.2531,290.8,747.4531,287.6,744.2531" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="287.6" y="730.0594">7</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="0" x="301.2" y="730.0594"/><path d="M285.6,754.6531 L285.6,774.6531 L477.6,774.6531 L477.6,762.6531 L469.6,754.6531 L285.6,754.6531 " fill="#D3D3D3" filter="url(#fyyj2gg2arcmu)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M469.6,754.6531 L469.6,762.6531 L477.6,762.6531 L469.6,754.6531 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="175.2" x="290.4" y="768.7078">Send finish single to Action Agent.</text><polygon fill="#A80036" points="522.8,795.95,530.8,799.15,522.8,802.35,526,799.15" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282" x2="527.6" y1="799.15" y2="799.15"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="287.6" y="795.3563">8</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="40" x="298" y="795.3563">Request</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="341.2" y="795.3563">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="44.8" x="417.2" y="795.3563">for event</text><polygon fill="#FFFFE0" filter="url(#fyyj2gg2arcmu)" points="516,809.55,556,809.55,564,818.35,556,827.95,516,827.95,508,818.35,516,809.55" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="36.8" x="517.6" y="822.8047">actions</text><polygon fill="#A80036" points="290.8,846.0469,282.8,849.2469,290.8,852.4469,287.6,849.2469" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="286" x2="535.6" y1="849.2469" y2="849.2469"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="295.6" y="845.4531">9</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="70.4" x="306" y="845.4531">Return results</text><path d="M285.6,859.6469 L285.6,879.6469 L494.4,879.6469 L494.4,867.6469 L486.4,859.6469 L285.6,859.6469 " fill="#D3D3D3" filter="url(#fyyj2gg2arcmu)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M486.4,859.6469 L486.4,867.6469 L494.4,867.6469 L486.4,859.6469 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="85.6" x="290.4" y="873.7016">deactive pending</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="379.2" y="873.7016">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="27.2" x="455.2" y="873.7016">event</text><polygon fill="#A80036" points="522.8,900.9438,530.8,904.1438,522.8,907.3438,526,904.1438" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="282" x2="527.6" y1="904.1438" y2="904.1438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14.4" x="287.6" y="900.35">10</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="77.6" x="305.2" y="900.35">Persist updated</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72.8" x="386" y="900.35">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="60.8" x="462" y="900.35">to CEP Store</text><polygon fill="#FFFFE0" filter="url(#fyyj2gg2arcmu)" points="516,938.5438,556,938.5438,564,947.3438,556,956.9438,516,956.9438,508,947.3438,516,938.5438" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="36.8" x="517.6" y="951.7985">actions</text><line style="stroke: #000000; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="194.8" x2="581.2" y1="967.5922" y2="967.5922"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="263.2" x="198.8" y="976.1">[Ignore - Message does not qualify for notification action]</text><!--
@startuml
title 10.3. Notification Limit Adjustment Rules Validation
autonumber

collections "Notification-Topic" as TOPIC_NOTIFY
control "Central Event Processor" as CEP
database "CEP Store" as DB

box "Central Services" #LightYellow
participant TOPIC_NOTIFY
end box
box "Central Event Processing Service" #LightGreen
participant CEP
participant DB
end box

Group Limit Adjustment Rules Validation
    activate CEP
    note right of TOPIC_NOTIFY #LightGrey
        Events are published
        to Notification Topic
        by Central Services
    end note
    TOPIC_NOTIFY <- CEP: Consumes notification messages
    activate TOPIC_NOTIFY
    deactivate TOPIC_NOTIFY
    CEP -> CEP: Filter according to event action
    note right of CEP
        Qualifying event action

        {
            "limit" in data.value.content.payload
        }
    end note

    alt Messages event type that qualify
        CEP -> DB: Update current **limits**
        activate DB
        hnote over DB #LightYellow
            limits
        end hnote
        deactivate DB
        CEP -> DB: Create **events** per participant
        activate DB
        hnote over DB #LightYellow
            events
        end hnote
        deactivate DB
        CEP -> CEP
        note right of CEP #LightGrey
            Check if there is a difference
            between the stored and captured **limits**
            for both **payee** and **payer**
            for all **currencies**.
        end note

        alt Limit difference identified
            CEP -> CEP
            note right of CEP #LightGrey
                Create new **Action Object**.
                Pass **Action Object** to the Action Agent.
            end note
        else Limits are equal - same event
            CEP -> CEP
            note right of CEP #LightGrey
                Send finish single to Action Agent.
            end note
            CEP -> DB: Request **Action Object** for event
            activate DB
            hnote over DB #LightYellow
                actions
            end hnote
            CEP <- - DB: Return results
            deactivate DB
            note right of CEP #lightGrey
                deactive pending **Action Object** event
            end note
            CEP -> DB: Persist updated **Action Object** to CEP Store
            activate DB
            hnote over DB #LightYellow
                actions
            end hnote
           deactivate DB
        end
    else Ignore - Message does not qualify for notification action
    end
    deactivate CEP
end
@enduml

PlantUML version 1.2018.11(Sat Sep 22 18:43:53 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b26
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>