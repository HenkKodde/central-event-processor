<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1444px" preserveAspectRatio="none" style="width:946px;height:1444px;" version="1.1" viewBox="0 0 946 1444" width="946px" zoomAndPan="magnify"><defs><filter height="300%" id="f1c57mmzss5r34" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="214" x="367" y="23.5352">10.5. Notification Action Flow</text><rect fill="#FFFFE0" height="1398.9531" style="stroke: #A80036; stroke-width: 1.0;" width="155" x="39" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="62.5" y="47.0566">Central Services</text><rect fill="#90EE90" height="1398.9531" style="stroke: #A80036; stroke-width: 1.0;" width="703" x="196" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="220" x="437.5" y="47.0566">Central Event Processing Service</text><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="1224.666" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="279" y="126.2871"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="1132.7344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="475" y="171.9082"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="307.1504"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="566.6348"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="683.5664"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="1217.666" style="stroke: #000000; stroke-width: 2.0;" width="922" x="13" y="133.2871"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="1075.4238" style="stroke: #000000; stroke-width: 2.0;" width="902" x="23" y="268.5293"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="637.7422" style="stroke: #000000; stroke-width: 2.0;" width="882" x="33" y="644.9453"/><rect fill="#FFFFFF" height="271.3945" style="stroke: none; stroke-width: 1.0;" width="882" x="33" y="1011.293"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="143.1973" style="stroke: #000000; stroke-width: 2.0;" width="482.5" x="422.5" y="1033.248"/><rect fill="#FFFFFF" height="14.9551" style="stroke: none; stroke-width: 1.0;" width="482.5" x="422.5" y="1161.4902"/><rect fill="#FFFFFF" height="54.2656" style="stroke: none; stroke-width: 1.0;" width="902" x="23" y="1289.6875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="116" x2="116" y1="116.2871" y2="1367.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="284" x2="284" y1="116.2871" y2="1367.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="479.5" x2="479.5" y1="116.2871" y2="1367.9531"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="859" x2="859" y1="116.2871" y2="1367.9531"/><rect fill="#FEFECE" filter="url(#f1c57mmzss5r34)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="47" y="76.7988"/><rect fill="#FEFECE" filter="url(#f1c57mmzss5r34)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="43" y="80.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="50" y="101.334">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f1c57mmzss5r34)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="47" y="1366.9531"/><rect fill="#FEFECE" filter="url(#f1c57mmzss5r34)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="43" y="1370.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="50" y="1391.4883">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="200" y="113.334">Central Event Processor</text><path d="M263.5,71.7988 L263.5,95.7988 M263.5,83.7988 L280.5,83.7988 " fill="none" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="292.5" cy="83.7988" fill="#FEFECE" filter="url(#f1c57mmzss5r34)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="200" y="1380.4883">Central Event Processor</text><path d="M263.5,1387.4414 L263.5,1411.4414 M263.5,1399.4414 L280.5,1399.4414 " fill="none" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="292.5" cy="1399.4414" fill="#FEFECE" filter="url(#f1c57mmzss5r34)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="432.5" y="113.334">Action Agent</text><ellipse cx="480" cy="83.7988" fill="#FEFECE" filter="url(#f1c57mmzss5r34)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="476,71.7988,482,66.7988,480,71.7988,482,76.7988,476,71.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="432.5" y="1380.4883">Action Agent</text><ellipse cx="480" cy="1399.4414" fill="#FEFECE" filter="url(#f1c57mmzss5r34)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="476,1387.4414,482,1382.4414,480,1387.4414,482,1392.4414,476,1387.4414" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="823" y="113.334">CEP Store</text><path d="M841,63.7988 C841,53.7988 859,53.7988 859,53.7988 C859,53.7988 877,53.7988 877,63.7988 L877,89.7988 C877,99.7988 859,99.7988 859,99.7988 C859,99.7988 841,99.7988 841,89.7988 L841,63.7988 " fill="#FEFECE" filter="url(#f1c57mmzss5r34)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M841,63.7988 C841,73.7988 859,73.7988 859,73.7988 C859,73.7988 877,73.7988 877,63.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="823" y="1380.4883">CEP Store</text><path d="M841,1393.4414 C841,1383.4414 859,1383.4414 859,1383.4414 C859,1383.4414 877,1383.4414 877,1393.4414 L877,1419.4414 C877,1429.4414 859,1429.4414 859,1429.4414 C859,1429.4414 841,1429.4414 841,1419.4414 L841,1393.4414 " fill="#FEFECE" filter="url(#f1c57mmzss5r34)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M841,1393.4414 C841,1403.4414 859,1403.4414 859,1403.4414 C859,1403.4414 877,1403.4414 877,1393.4414 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="1224.666" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="279" y="126.2871"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="1132.7344" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="475" y="171.9082"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="307.1504"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="566.6348"/><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="854" y="683.5664"/><path d="M13,133.2871 L135,133.2871 L135,140.2871 L125,150.2871 L13,150.2871 L13,133.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1217.666" style="stroke: #000000; stroke-width: 2.0;" width="922" x="13" y="133.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="28" y="146.8555">Action Flow</text><polygon fill="#A80036" points="463,167.9082,473,171.9082,463,175.9082,467,171.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="289" x2="469" y1="171.9082" y2="171.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="296" y="167.166">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="309" y="167.166">Recieves an action event</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="485" x2="527" y1="201.2188" y2="201.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="527" x2="527" y1="201.2188" y2="214.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="486" x2="527" y1="214.2188" y2="214.2188"/><polygon fill="#A80036" points="496,210.2188,486,214.2188,496,218.2188,492,214.2188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="492" y="196.4766">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="509" y="196.4766"/><path d="M490,227.2188 L490,252.2188 L644,252.2188 L644,237.2188 L634,227.2188 L490,227.2188 " fill="#D3D3D3" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M634,227.2188 L634,237.2188 L644,237.2188 L634,227.2188 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="496" y="244.7871">Evaluate action event</text><path d="M23,268.5293 L85,268.5293 L85,275.5293 L75,285.5293 L23,285.5293 L23,268.5293 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1075.4238" style="stroke: #000000; stroke-width: 2.0;" width="902" x="23" y="268.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="282.0977">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4" x="100" y="281.1641">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="104" y="281.1641">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="184" y="281.1641">exist]</text><polygon fill="#A80036" points="842,303.1504,852,307.1504,842,311.1504,846,307.1504" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="485" x2="848" y1="307.1504" y2="307.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="492" y="302.4082">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="505" y="302.4082">Request</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="559" y="302.4082">Event Object</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="653" y="302.4082">details</text><polygon fill="#FBFB77" filter="url(#f1c57mmzss5r34)" points="840,350.1504,878,350.1504,888,361.1504,878,373.1504,840,373.1504,830,361.1504,840,350.1504" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="34" x="842" y="366.7188">event</text><path d="M490,383.4609 L490,454.4609 L685,454.4609 L685,393.4609 L675,383.4609 L490,383.4609 " fill="#D3D3D3" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M675,383.4609 L675,393.4609 L685,393.4609 L675,383.4609 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="496" y="401.0293">Event Object</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="586" y="401.0293">details;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="512" y="416.3398">Action details,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="512" y="431.6504">Hub notification details,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="512" y="446.9609">DFSP notification details.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="485" x2="527" y1="485.0137" y2="485.0137"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="527" x2="527" y1="485.0137" y2="498.0137"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="486" x2="527" y1="498.0137" y2="498.0137"/><polygon fill="#A80036" points="496,494.0137,486,498.0137,496,502.0137,492,498.0137" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="492" y="480.2715">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="509" y="480.2715"/><path d="M490,511.0137 L490,536.0137 L680,536.0137 L680,521.0137 L670,511.0137 L490,511.0137 " fill="#D3D3D3" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M670,511.0137 L670,521.0137 L680,521.0137 L670,511.0137 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="496" y="528.582">Prepare notification details</text><polygon fill="#A80036" points="842,562.6348,852,566.6348,842,570.6348,846,566.6348" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="485" x2="848" y1="566.6348" y2="566.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="492" y="561.8926">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="505" y="561.8926">Request</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="559" y="561.8926">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="654" y="561.8926">by same</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="710" y="561.8926">Event Object</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="800" y="561.8926">details</text><polygon fill="#FBFB77" filter="url(#f1c57mmzss5r34)" points="837,609.6348,880,609.6348,890,620.6348,880,632.6348,837,632.6348,827,620.6348,837,609.6348" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="839" y="626.2031">action</text><path d="M33,644.9453 L95,644.9453 L95,651.9453 L85,661.9453 L33,661.9453 L33,644.9453 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="637.7422" style="stroke: #000000; stroke-width: 2.0;" width="882" x="33" y="644.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="48" y="658.5137">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="110" y="657.5801">[No previous</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="186" y="657.5801">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="130" x="266" y="657.5801">with same event detail]</text><polygon fill="#A80036" points="842,679.5664,852,683.5664,842,687.5664,846,683.5664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="485" x2="848" y1="683.5664" y2="683.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="492" y="678.8242">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="505" y="678.8242">Store</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="541" y="678.8242">Action Object</text><polygon fill="#FBFB77" filter="url(#f1c57mmzss5r34)" points="837,696.5664,880,696.5664,890,707.5664,880,719.5664,837,719.5664,827,707.5664,837,696.5664" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="839" y="713.1348">action</text><polygon fill="#A80036" points="496,742.1875,486,746.1875,496,750.1875,492,746.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="490" x2="858" y1="746.1875" y2="746.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="502" y="741.4453">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="515" y="741.4453">Return result</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="600" y="741.4453">actionId</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="485" x2="527" y1="775.498" y2="775.498"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="527" x2="527" y1="775.498" y2="788.498"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="486" x2="527" y1="788.498" y2="788.498"/><polygon fill="#A80036" points="496,784.498,486,788.498,496,792.498,492,788.498" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="492" y="770.7559">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="509" y="770.7559"/><path d="M490,801.498 L490,841.498 L689,841.498 L689,811.498 L679,801.498 L490,801.498 " fill="#D3D3D3" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M679,801.498 L679,811.498 L689,811.498 L679,801.498 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="496" y="819.0664">Schedule reset repetition for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="496" y="834.377">this</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="524" y="834.377">actionId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="582" y="834.377">as per rules</text><rect fill="#FFFFFF" filter="url(#f1c57mmzss5r34)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="291" x="429.5" y="851.1191"/><polygon fill="#EEEEEE" points="429.5,851.1191,493.5,851.1191,493.5,858.1191,483.5,868.1191,429.5,868.1191,429.5,851.1191" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="442.5" y="865.6875">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="435.5" y="884.6875">Notification Scheduler Flow {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/central-event-processor/tree/master/docs/sequence_diagrams/notification-schedulerFlow.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/central-event-processor/tree/master/docs/sequence_diagrams/notification-schedulerFlow.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="94" x="616.5" y="884.6875">Scheduler Flow</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="616.5" x2="710.5" y1="886.6875" y2="886.6875"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="710.5" y="884.6875">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="439.5" y="899.998"/><polygon fill="#A80036" points="127.5,929.3613,117.5,933.3613,127.5,937.3613,123.5,933.3613" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="121.5" x2="474" y1="933.3613" y2="933.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="133.5" y="928.6191">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="146.5" y="928.6191">Update topic with notification</text><path d="M291,946.3613 L291,1001.3613 L466,1001.3613 L466,956.3613 L456,946.3613 L291,946.3613 " fill="#FBFB77" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M456,946.3613 L456,956.3613 L466,956.3613 L456,946.3613 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="297" y="963.9297">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="313" y="979.2402">from field = "SYSTEM"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="297" y="994.5508">}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="33" x2="915" y1="1012.293" y2="1012.293"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="38" y="1022.9277">[Previous</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="95" y="1022.9277">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="130" x="175" y="1022.9277">with same event detail]</text><path d="M422.5,1033.248 L484.5,1033.248 L484.5,1040.248 L474.5,1050.248 L422.5,1050.248 L422.5,1033.248 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="143.1973" style="stroke: #000000; stroke-width: 2.0;" width="482.5" x="422.5" y="1033.248"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="437.5" y="1046.8164">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="252" x="499.5" y="1045.8828">[Repetition and notification interval allowed]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="485" x2="527" y1="1071.8691" y2="1071.8691"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="527" x2="527" y1="1071.8691" y2="1084.8691"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="486" x2="527" y1="1084.8691" y2="1084.8691"/><polygon fill="#A80036" points="496,1080.8691,486,1084.8691,496,1088.8691,492,1084.8691" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="492" y="1067.127">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="518" y="1067.127"/><path d="M490,1097.8691 L490,1122.8691 L695,1122.8691 L695,1107.8691 L685,1097.8691 L490,1097.8691 " fill="#D3D3D3" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M685,1097.8691 L685,1107.8691 L695,1107.8691 L685,1097.8691 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="496" y="1115.4375">Increment repetition counter.</text><polygon fill="#A80036" points="847,1149.4902,857,1153.4902,847,1157.4902,851,1153.4902" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="485" x2="853" y1="1153.4902" y2="1153.4902"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="492" y="1148.748">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="514" y="1148.748">Update</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="562" y="1148.748">Action Object</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="422.5" x2="905" y1="1162.4902" y2="1162.4902"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="274" x="427.5" y="1173.125">[Repetition and notification interval not allowed]</text><polygon fill="#A80036" points="127.5,1200.7559,117.5,1204.7559,127.5,1208.7559,123.5,1204.7559" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="121.5" x2="474" y1="1204.7559" y2="1204.7559"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="133.5" y="1200.0137">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="155.5" y="1200.0137">Update topic with notification</text><path d="M291,1217.7559 L291,1272.7559 L466,1272.7559 L466,1227.7559 L456,1217.7559 L291,1217.7559 " fill="#FBFB77" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M456,1217.7559 L456,1227.7559 L466,1227.7559 L456,1217.7559 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="297" y="1235.3242">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="313" y="1250.6348">from field = "SYSTEM"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="297" y="1265.9453">}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="925" y1="1290.6875" y2="1290.6875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="1301.3223">[No</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="51" y="1301.3223">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4" x="127" y="1301.3223">]</text><path d="M294,1309.6426 L294,1334.6426 L475,1334.6426 L475,1319.6426 L465,1309.6426 L294,1309.6426 " fill="#D3D3D3" filter="url(#f1c57mmzss5r34)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M465,1309.6426 L465,1319.6426 L475,1319.6426 L465,1309.6426 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="300" y="1327.2109">EXIT - No action required</text><!--
@startuml
title 10.5. Notification Action Flow
autonumber

collections "Notification-Topic" as TOPIC_NOTIFY
boundary "Central Event Processor" as CEP
control "Action Agent" as AA
database "CEP Store" as DB

box "Central Services" #LightYellow
participant TOPIC_NOTIFY
end box
box "Central Event Processing Service" #LightGreen
participant CEP
participant AA
participant DB
end box

Group Action Flow
    activate CEP
    CEP -> AA: Recieves an action event
    activate AA
    AA -> AA
    note right of AA #lightGrey
        Evaluate action event
    end note

    alt **Action Object** exist
        AA -> DB: Request **Event Object**  details
        activate DB
        deactivate DB
        hnote over DB
            event
        end hnote
        note right of AA #LightGrey
            **Event Object** details;
                Action details,
                Hub notification details,
                DFSP notification details.
        end note
        AA -> AA
        note right of AA #LightGrey
            Prepare notification details
        end note
        AA -> DB: Request **Action Object** by same **Event Object** details
        activate DB
        deactivate DB
        hnote over DB
            action
        end hnote

        alt No previous **Action Object** with same event detail
            AA -> DB: Store **Action Object**
            activate DB
            hnote over DB
                action
            end hnote
            AA <- - DB: Return result **actionId**
            deactivate DB
            AA -> AA
            note right of AA #LightGrey
                Schedule reset repetition for
                this **actionId** as per rules
            end note
            ref over AA :  Notification Scheduler Flow {[[https://github.com/mojaloop/central-event-processor/tree/master/docs/sequence_diagrams/notification-schedulerFlow.svg Scheduler Flow]]} \n

            TOPIC_NOTIFY <- AA: Update topic with notification
            note left of AA
                {
                    from field = "SYSTEM"
                }
            end note
        else Previous **Action Object** with same event detail

            alt Repetition and notification interval allowed
                AA -> AA
                note right of AA #LightGrey
                    Increment repetition counter.
                end note
            AA -> DB: Update **Action Object**
            else Repetition and notification interval not allowed
            end
            activate DB
            deactivate DB
            TOPIC_NOTIFY <- AA: Update topic with notification
            note left of AA
                {
                    from field = "SYSTEM"
                }
            end note
        end
    else No **Action Object**
    deactivate AA
    note right of CEP #LightGrey
        EXIT - No action required
    end note
    end
    deactivate CEP
end
@enduml

PlantUML version 1.2018.11(Sat Sep 22 18:43:53 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b26
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>